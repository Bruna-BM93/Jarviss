<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: auto; }
        .card { border: 1px solid #ccc; margin: 8px 0; padding: 12px; }
        .actions button { margin-right: 8px; }
    </style>
</head>
<body>
<h2 id="greeting">Bem-vindo!</h2>
<div class="card" id="resumo"></div>
<div class="card">
    <h3>Tarefas do Dia</h3>
    <ul id="tarefas"></ul>
    <button id="ver-agenda">Ver Agenda Completa</button>
</div>
<div class="card" id="lembrete"></div>
<div class="card actions">
    <button onclick="novaReceita()">+ Receita</button>
    <button onclick="novaDespesa()">+ Despesa</button>
    <button onclick="novoLembrete()">+ Lembrete</button>
    <button onclick="enviarRelatorio()">RelatÃ³rio DiÃ¡rio</button>
</div>
<script>
const token = localStorage.getItem('token');
const usuario = localStorage.getItem('usuario');
if (!token) location.href = '/login';

function carregar() {
  fetch('/dashboard_data?usuario=' + usuario, {headers:{'Authorization':'Bearer ' + token}})
    .then(r => r.json())
    .then(d => {
      document.getElementById('resumo').innerHTML = `ðŸ’° Receita Hoje: R$ ${Number(d.receita).toFixed(2)}<br>ðŸ’¸ Despesa Hoje: R$ ${Number(d.despesa).toFixed(2)}<br>ðŸ“Š Saldo do Dia: R$ ${Number(d.saldo).toFixed(2)}`;
      document.getElementById('tarefas').innerHTML = d.tarefas.map(t => `<li>${t.concluida ? 'âœ…' : '[ ]'} ${t.descricao} Ã s ${t.hora}</li>`).join('');
      document.getElementById('lembrete').innerText = d.proximo_lembrete ? 'ðŸ”” PrÃ³ximo Lembrete: ' + d.proximo_lembrete : '';
    });
}
carregar();
</script>
</body>
</html>
